<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="productMapper">

	<resultMap id="productResultSet" type="product">
		<result column="PRODUCT_NO" property="productNo" />
		<result column="PRODUCT_NAME" property="productName" />
		<result column="PRICE" property="price" />
		<result column="DISCRIPTION" property="description" />
		<result column="ATTACHMENT1" property="attachment1" />
		<result column="ATTACHMENT2" property="attachment2" />
		<result column="ATTACHMENT3" property="attachment3" />
		<result column="ATTACHMENT4" property="attachment4" />
		<result column="PRODUCT_STATUS" property="productStatus" />
		<result column="SELLER_NO" property="sellerNo" />
		<result column="S_COUPON_NO" property="stoCouponNo" />
		<result column="K_COUPON_NO" property="keyCouponNo" />
		<result column="S_COUPON_NAME" property="stoCouponName" />
		<result column="K_COUPON_NAME" property="keyCouponName" />
		<result column="S_COUPON_PRICE" property="stoCouponPrice" />
		<result column="K_COUPON_PRICE" property="keyCouponPrice" />
		<result column="S_PRODUCT_NO" property="stoProductNo" />
		<result column="K_PRODUCT_NO" property="keyProductNo" />
	</resultMap>
	
	<resultMap id="couponResultSet" type="coupon">
		<result column="COUPON_NO" property="couponNo" />
		<result column="COUPON_NAME" property="couponName" />
		<result column="COUPON_PRICE" property="couponPrice" />
	</resultMap>
	
	<select id="selectListCount" resultType="_int">
		SELECT COUNT(*)
		FROM PRODUCT
		WHERE PRODUCT_STATUS = 1
	</select>
	
	<select id="selectList" resultMap="productResultSet">
		SELECT P.PRODUCT_NO
             , PRODUCT_NAME
             , PRICE
             , ATTACHMENT1
             , S.COUPON_NO AS "S_COUPON_NO"
             , K.COUPON_NO AS "K_COUPON_NO"
             , S.COUPON_NAME AS "S_COUPON_NAME"
             , K.COUPON_NAME AS "K_COUPON_NAME"
             , S.COUPON_PRICE AS "S_COUPON_PRICE"
             , K.COUPON_PRICE AS "K_COUPON_PRICE"
             , S.PRODUCT_NO AS "S_PRODUCT_NO"
             , K.PRODUCT_NO AS "K_PRODUCT_NO"
		FROM PRODUCT P
		LEFT JOIN COUPON_STORE S ON (P.PRODUCT_NO = S.PRODUCT_NO)
		LEFT JOIN COUPON_KEYBOARDER K ON (P.PRODUCT_NO = K.PRODUCT_NO)
		ORDER BY P.PRODUCT_NO DESC
	</select>
	
	<select id="keyCouponList" resultMap="couponResultSet">
		SELECT COUPON_NO 
		     , COUPON_NAME
		     , COUPON_PRICE
		FROM COUPON_KEYBOARDER
	</select>
	
	<select id="stoCouponList" resultMap="couponResultSet">
		SELECT COUPON_NO
		     , COUPON_NAME
		     , COUPON_PRICE
		FROM COUPON_STORE
	</select>
	
	<!-- 
	쿠폰이름 조회 테이블, 더미 받으면 확인 필요!!
		SELECT PRO.PRODUCT_NO
		     , PRODUCT_NAME
		     , PRICE
		     , ATTACHMENT1
		     , KEYC.COUPON_NAME
		     , STOC.COUPON_NAME
		FROM PRODUCT PRO
		JOIN COUPON_KEYBOARDER KEYC ON(PRO.PRODUCT_NO = KEYC.PRODUCT_NO)
		JOIN COUPON_STORE STOC ON(PRO.PRODUCT_NO = STOC.PRODUCT_NO)
		WHERE PRODUCT_STATUS = 1
		ORDER BY PRODUCT_NO DESC
		
		SELECT P.PRODUCT_NO
            , PRODUCT_NAME
            , PRICE
            , ATTACHMENT1
            , S.COUPON_NO "스토어쿠폰NO"
            , K.COUPON_NO
            , S.COUPON_NAME
            , K.COUPON_NAME
            , S.COUPON_PRICE
            , K.COUPON_PRICE
            , S.PRODUCT_NO
            , K.PRODUCT_NO
FROM PRODUCT P
LEFT JOIN COUPON_STORE S ON (P.PRODUCT_NO = S.PRODUCT_NO)
LEFT JOIN COUPON_KEYBOARDER K ON (P.PRODUCT_NO = K.PRODUCT_NO)

SELECT PRODUCT_NO
		     , PRODUCT_NAME
		     , PRICE
		     , ATTACHMENT1
ㄴ		FROM PRODUCT
		WHERE PRODUCT_STATUS = 1
		ORDER BY PRODUCT_NO DESC
	 -->
	
</mapper>


































