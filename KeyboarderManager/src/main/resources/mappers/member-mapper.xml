<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="member-mapper">


	<resultMap id="memberResultSet" type="member">
		<result column="SELLER_NO" property="sellerNo" />
		<result column="SELLER_NAME" property="sellerName" />
		<result column="REP_NAME" property="repName"/>
		<result column="SELLER_ID" property="sellerId" />
		<result column="SELLER_PWD" property="sellerPwd" />
		<result column="SELLER_EMAIL" property="sellerEmail" />
		<result column="SELLER_PHONE" property="sellerPhone" />
		<result column="CORP_NO" property="corpNo" />
		<result column="ACCOUNT_NO" property="accountNo" />
		<result column="JOIN_DATE" property="joinDate" />
		<result column="LOCATION" property="location" />
		<result column="SELLER_STATUS" property="sellerStatus" />
		<result column="IDENTIFY_STATUS" property="identifyStatus" />
		<result column="LOGO_ATTACHMENT" property="logoAttachment" />
	</resultMap>
	
	<resultMap id="adminResultSet" type="member">
		<result column="ADMIN_ID" property="sellerId" />
		<result column="ADMIN_PWD" property="sellerPwd" />
	</resultMap>
	
	
	<select id="loginMember" parameterType="member" resultMap="memberResultSet">
		SELECT *
		FROM SELLER
		WHERE SELLER_ID = #{sellerId}
			AND SELLER_PWD = #{sellerPwd}
	</select>
	
	<select id="loginAdmin" parameterType="member" resultMap="adminResultSet">
		SELECT *
		FROM ADMIN
		WHERE ADMIN_ID = #{sellerId}
			AND ADMIN_PWD = #{sellerPwd}
	</select>	
	
	<select id="findId" parameterType="string" resultType="string">
		SELECT SELLER_ID
		FROM SELLER
		WHERE CORP_NO = #{corpNo}
	</select>
	
	<select id="initializePwdForm" parameterType="member" resultMap="memberResultSet">
		SELECT *
		FROM SELLER
		WHERE SELLER_ID = #{sellerId}
		  AND CORP_NO = #{corpNo}
	</select>
	
	<update id="initializePwd" parameterType="member">
		UPDATE SELLER
		   SET SELLER_PWD = #{sellerPwd}
		 WHERE SELLER_ID = #{sellerId}	
	</update>
	
	<insert id="insertMember" parameterType="member">
		INSERT INTO CONSUMER(CON_NO
															, CON_NAME
															, CON_ID
															, CON_PWD
															, ADDRESS
															, CON_PHONE
															, CON_EMAIL)
									        VALUES( SEQ_CON_NO.NEXTVAL
									        				, #{conName}
									        				, #{conId}
									        				, #{conPwd}
									        				, #{address}
									        				, #{conPhone}
									        				, #{conEmail})
	</insert>
	
	<select id="idCheck" parameterType="string" resultType="_int">
		SELECT COUNT(*)
		FROM CONSUMER
		WHERE CON_ID = #{conId}
	</select>

</mapper>
